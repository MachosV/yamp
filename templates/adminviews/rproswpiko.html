{{define "rproswpiko"}}
{{template "header"}}
{{template "navbar"}}
<link rel="stylesheet" href="css/jquery-ui.min.css">
<div class="row">
    <div class="col-sm-4">
        <div class="panel panel-default">
            <div class="panel-heading text-left">
                {{.Data.Proswpiko.Label}}
            </div>
            <div class="panel-body">
                <p>{{.Data.Proswpiko.Rank}}</p>
                <p>{{.Data.Proswpiko.Surname}} {{.Data.Proswpiko.Name}}</p>
            </div>
            <div class="panel-footer text-center">
                <form action="dproswpiko" method="POST">
                    <input type="hidden" name="csrftoken" value={{.Context.Csrftoken}}>
                    <input type="hidden" name="id" value={{.Data.Proswpiko.ID}}>
                    <button type="submit" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span> Διαγραφή προσώπου</button>
                </form>                                
            </div>
        </div>
    </div>
</div>
<p class="text-info">{{.Context.Message}}</p>
{{$csrftoken := .Context.Csrftoken}}
{{$personid := .Data.Proswpiko.ID}}      
{{if ge .Context.Role 3}}
<div>
<h3>Μετάθεση</h3>
    <form class="form-inline" action="metathesi" method="POST">
        <input type="hidden" name="csrftoken" value={{.Context.Csrftoken}}>
        <input type="hidden" name="id" value={{.Data.Proswpiko.ID}}>
        <div class="form-group">
            <select class="form-control" name="label" required>
            {{range .Data.Ierarxia}}
                <option value={{.ID}}>{{.Perigrafi}}</option>
            {{end}}
            </select>
        </div>
        <button class="btn btn-primary" type="submit">
            <span class="glyphicon glyphicon-globe"></span>
            Μετάθεση</button>
    </form>
</div> <!--metathesi-->
{{end}}

<div>
    <h3>Μεταβολές</h3>
    <h4>Προσθήκη μεταβολής <span class="glyphicon glyphicon-info-sign text-info" data-toggle="tooltip" title="Μπορείτε να προσθέσετε μεταβολή μίας ημέρας αν βάλετε ημερομηνία μόνο στο πεδίο Από."></span></h4>
    <form class="form-inline" action="cadeia" method="POST">
        <div class="form-group">
            <select class="form-control" name="typosadeias" required>
                {{range .Data.TypoiAdeiwn}}
                <option value={{.ID}}>{{.TyposAdeias}}</option>
                {{end}}
            </select>
        </div>
        <div class="form-group">
            <label>Από</label>
            <input class="form-control datepicker" type="text" id="start" size="30">
        </div>
        <div class="form-group">
            <label>Εώς</label>
            <input class="form-control datepicker" type="text" id="end" size="30">    
        </div>
        <input type="hidden" name="start" id="starthidden">
        <input type="hidden" name="end" id="endhidden">
        <input type="hidden" name="personid" value={{.Data.Proswpiko.ID}}>
        <input type="hidden" name="csrftoken" value={{.Context.Csrftoken}}>
        <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus"></span>
            Προσθήκη</button>
    </form>
    {{if not .Data.Adeies}}
    <h4>Καμία μεταβολή</h4>
    {{end}}
    {{if .Data.Adeies}}
    <h4>Λίστα μεταβολών</h4>
    <div class="container-fluid">
        <ul class="list-group">
        {{range .Data.Adeies}}
        <div class="row">
                <li class="list-group-item col-sm-4">
                    <span>{{.Repr}}</span>
                    <form action="dadeia" method="POST">
                        <input type="hidden" name="csrftoken" value={{$csrftoken}}>
                        <input type="hidden" name="id" value={{.ID}}>
                        <input type="hidden" name="personid" value={{$personid}}>
                        <button type="submit" class="btn btn-danger">
                            <span class="glyphicon glyphicon-trash"></span>
                            Διαγραφή</button>
                    </form>
                    </li>
        </div>
        {{end}}
        </ul>
    </div>
    {{end}}
</div> <!--metaboles-->

<div>
    <h3>Υπηρεσίες</h3>
    {{if le .Context.Role 2}}
    <h4>Προσθήκη υπηρεσίας</h4>
    <form class="form-inline" action="cpersonypiresia" method="POST">
        <div class="form-group">
            <select class="form-control" name="ypiresiaid">
            {{range .Data.TypoiYpiresiwn}}
                <option value="{{.ID}}">{{.Perigrafi}}</option>
            {{end}}
            </select>            
        </div>
        <input type="hidden" name="csrftoken" value={{$csrftoken}}>
        <input type="hidden" name="personid" value={{$personid}}>
        <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span>
            Προσθήκη</button>   
    </form>
    {{end}}
    {{if not .Data.Ypiresies}}
    <h4>Καμία υπηρεσία</h4>
    {{end}}
    {{if .Data.Ypiresies}}
    <h4>Λίστα υπηρεσιών</h4>
    <div class="container-fluid">
        <ul class="list-group">
        {{range .Data.Ypiresies}}
            <div class="row">
                <li class="list-group-item col-sm-4">
                <span>{{.Perigrafi}} {{.Date}}</span>
                <form class="form-inline" action="dpersonypiresia" method="POST">
                    <input type="hidden" name="csrftoken" value={{$csrftoken}}>
                    <input type="hidden" name="id" value={{.ID}}>
                    <input type="hidden" name="personid" value={{$personid}}>
                    <button type="submit" class="btn btn-danger">
                        <span class="glyphicon glyphicon-trash"></span>
                        Διαγραφή
                    </button>
                </form>        
                </li>
            </div>
        {{end}}
        </ul>
    </div>
    {{end}}   
</div><!--ypiresies-->

<div>
    <h3>Αιτήσεις</h3>
    <h4>Προσθήκη αίτησης</h4>
    <form class="form-inline" action="caitisi" method="POST">
            <input type="hidden" name="csrftoken" value={{$csrftoken}}>
            <input type="hidden" name="personid" value={{$personid}}>
            <input type="text" name="perigrafi">
            <button type="submit" class="btn btn-primary">
                <span class="glyphicon glyphicon-plus"></span>
                Προσθήκη
            </button>
    </form>
    {{if not .Data.Aitiseis}}
    <h4>Καμία αίτηση</h4>
    {{end}}
    {{if.Data.Aitiseis}}
    <h4>Αιτήσεις</h4>
    <div class="container-fluid">
        <ul class="list-group">
            {{range .Data.Aitiseis}}
            <div class="row">
            <li class="list-group-item col-sm-4">
                <span>Αίτηση για {{.Perigrafi}}, καταχωρήθηκε την {{.Date}}</span>
                <form class="form-inline" action="daitisi" method="POST">
                    <input type="hidden" name="csrftoken" value={{$csrftoken}}>
                    <input type="hidden" name="id" value={{.ID}}>
                    <input type="hidden" name="personid" value={{$personid}}>
                    <button type="submit" class="btn btn-danger">
                        <span class="glyphicon glyphicon-trash"></span>
                        Διαγραφή
                    </button>
                </form>
            </div>
            </li>
            {{end}}
        </ul>
    </div>
    {{end}}
</div>
<div>
    <h3>Αναφορές</h3>
    <h4>Προσθήκη αναφοράς</h4>
    <form class="form-inline" action="canafora" method="POST">
        <input type="hidden" name="csrftoken" value={{$csrftoken}}>
        <input type="hidden" name="personid" value={{$personid}}>
        <input type="text" name="perigrafi">
        <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus"></span>
            Προσθήκη
        </button>
    </form>
    {{if not .Data.Anafores}}
    <h4>Καμία αναφορά</h4>
    {{end}}
    {{if .Data.Anafores}}
    <h4>Αναφορές</h4>
    <div class="container-fluid">
        <ul class="list-group">
            {{range .Data.Anafores}}
            <div class="row">
                <li class="list-group-item col-sm-4">
                    <span>{{.Perigrafi}}, καταχωρήθηκε την {{.Date}}</span>
                    <form action="danafora" method="POST">
                        <input type="hidden" name="csrftoken" value={{$csrftoken}}>
                        <input type="hidden" name="personid" value={{$personid}}>
                        <input type="hidden" name=id value={{.ID}}>
                        <button class="btn btn-danger" type="submit">
                        <span class="glyphicon glyphicon-trash"></span>
                        Διαγραφή
                        </button>
                    </form>
                </li>
            </div>
            {{end}}
        </ul>
    </div>
</div>
    {{end}}
{{template "footer"}}
<script src="js/diagoras/datemod.js"></script>
{{end}}